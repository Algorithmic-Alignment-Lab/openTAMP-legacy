'''
VGA
res: 672x376
Center of table: 200, 350 (row, col) -> 52, 5 (x, y)
Pixels per centimeter: 
Pixel window: 40
'''

'''
Angle between left edge of images and left edge of table: 0.111 radians
'''
import numpy as np

cloth_grid_window = 40

cloth_grid_input_dim = 15

cloth_grid_coordinates = [
    ((-0.7, -0.65), 1),
    ((-0.7, -0.5), 1),
    ((-0.85, 0.4), 2),
    ((-0.85, 0.6), 2),
    ((-0.8, 0.65), 2),
    ((-0.8, 0.7), 2),
    ((-0.8, 0.75), 2),
    ((-0.75, 0.6), 2),
    ((-0.75, 0.65), 2),
    ((-0.75, 0.7), 2),
    ((-0.75, 0.75), 2),
    ((-0.6, 0.75), 2),
    ((-0.6, 0.65), 2),
    ((-0.6, 0.7), 2),
    ((-0.6, 0.75), 2),
    ((-0.6, 0.8), 2),
    ((-0.65, 0.75), 2),
    ((-0.65, 0.65), 2),
    ((-0.65, 0.7), 2),
    ((-0.65, 0.75), 2),
    ((-0.65, 0.8), 2),
    # ((-0.35, 0.65), 2),
    # ((-0.35, 0.55), 2),
    # ((-0.35, 0.75), 2),
    # ((-0.3, 0.55), 2),
    # ((-0.3, 0.6), 2),
    # ((-0.3, 0.65), 2),
    # ((-0.3, 0.7), 2),
    # ((-0.3, 0.75), 2),
    # ((-0.45, 0.65), 2),
    # ((-0.45, 0.7), 2),
    # ((-0.45, 0.75), 2),
    # ((-0.4, 0.4), 2),
    # ((-0.4, 0.45), 2),
    # ((-0.4, 0.5), 2),
    # ((-0.4, 0.55), 2),
    # ((-0.4, 0.6), 2),
    # ((-0.4, 0.65), 2),
    # ((-0.4, 0.7), 2),
    # ((-0.4, 0.75), 2),
    # ((-0.3, 0.4), 2),
    # ((-0.3, 0.45), 2),
    # ((-0.3, 0.5), 2),
    # ((-0.3, 0.55), 2),
    # ((-0.3, 0.6), 2),
    # ((-0.3, 0.65), 2),
    # ((-0.3, 0.7), 2),
    # ((-0.3, 0.75), 2),
    # ((-0.2, 0.4), 2),
    # ((-0.2, 0.45), 2),
    # ((-0.2, 0.5), 2),
    # ((-0.2, 0.55), 2),
    # ((-0.2, 0.6), 2),
    # ((-0.2, 0.65), 2),
    # ((-0.2, 0.7), 2),
    # ((-0.2, 0.75), 2),
    # ((-0.1, 0.5), 2),
    # ((-0.1, 0.55), 2),
    # ((-0.1, 0.6), 2),
    # ((-0.1, 0.65), 2),
    # ((-0.1, 0.7), 2),
    # ((-0.1, 0.75), 2),
    # ((0.0, 0.5), 2),
    # ((0.0, 0.55), 2),
    # ((0.0, 0.6), 2),
    # ((0.0, 0.65), 2),
    # ((0.0, 0.7), 2),
    # ((0.0, 0.75), 2),
    ((0.4, 0.75), 3),
    ((0.45, 0.75), 3),
    ((0.5, 0.75), 3),
    ((0.75, 0.75), 3),
    ((0.6, 0.75), 3),
    ((0.65, 0.75), 3),
    ((0.6, 0.75), 3),
    ((0.75, 0.75), 3),
    ((0.4, 0.6), 3),
    ((0.45, 0.6), 3),
    ((0.5, 0.6), 3),
    ((0.75, 0.6), 3),
    ((0.6, 0.6), 3),
    ((0.65, 0.6), 3),
    ((0.6, 0.6), 3),
    ((0.75, 0.6), 3),
    ((0.4, 0.65), 3),
    ((0.45, 0.65), 3),
    ((0.5, 0.65), 3),
    ((0.75, 0.65), 3),
    ((0.6, 0.65), 3),
    ((0.65, 0.65), 3),
    ((0.6, 0.65), 3),
    ((0.75, 0.65), 3),
    ((0.4, 0.7), 3),
    ((0.45, 0.7), 3),
    ((0.5, 0.7), 3),
    ((0.75, 0.7), 3),
    ((0.6, 0.7), 3),
    ((0.65, 0.7), 3),
    ((0.6, 0.7), 3),
    ((0.75, 0.7), 3),
    ((0.4, 0.75), 3),
    ((0.45, 0.75), 3),
    ((0.5, 0.75), 3),
    ((0.75, 0.75), 3),
    ((0.6, 0.75), 3),
    ((0.65, 0.75), 3),
    ((0.6, 0.75), 3),
    ((0.75, 0.75), 3),
    ((-0.65, 0.2), 5),
    ((-0.65, 0.3), 5),
    ((-0.65, 0.05), 5),
    ((-0.75, 0.25), 5),
    ((-0.75, 0.15), 5),
    ((-0.75, 0.35), 5),
    ((0.525, 0.15), 7),
    ((0.6, -0.05), 7),
    ((0.6, 0.0), 7),
    ((0.6, 0.15), 7),
    ((0.7, 0.0), 7),
    ((0.55, 0.0), 7),
]

washer_im_locs = [((180, 240), (0.14, 1.3, 0.73)), # -> CENTER FRONT
                  ((175, 145), (0, 1.15, 0.77)), # -> LEFT FRONT
                  ((180, 300), (0.2, 1., 0.82)), # -> RIGHT FRONT
                  ((160, 215), (0.2, 1.38, 0.77)), # -> CENTER REAR
                  ((130, 110), (0.1, 1.38, 0.77)), # -> LEFT REAR
                  ((130, 290), (0.27, 1.34, 0.76))] # -> RIGHT REAR

# wrist_im_offsets = [((0, -50), (0.0, 0.05)),
#                     ((50, 0), (-0.08, 0.0)),
#                     ((0, 30), (0.0, -0.05)),
#                     ((-50, 0), (0.08, 0.0)),
#                     ((-50, -50), (0.05, 0.05)),
#                     ((-50, 50), (0.05, -0.05)),
#                     ((50, 50), (-0.05, -0.05)),
#                     ((50, -50), (-0.05, 0.05)),
#                     ((0, -150), (0.0, 0.02)),
#                     ((0, 80), (0.0, -0.05)),]

wrist_im_offsets = [((0, -50), (-0.05, 0.0)),
                    ((50, 0), (0.0, -0.05)),
                    ((0, 30), (0.05, 0.0)),
                    ((-50, 10), (0.0, 0.05)),
                    ((-50, -100), (-0.05, 0.05)),
                    # ((-50, 50), (0.05, 0.05)),
                    ((50, 50), (0.05, -0.05)),
                    ((50, -50), (-0.05, -0.05)),
                    ((0, -150), (-0.05, 0.0)),
                    ((0, 80), (0.05, 0.0)),]

# cloth_grid_ref = np.array([[200, 350], [75, 5]])
cloth_grid_ref = np.array([[242, 677], [64, 4]])

pixels_per_cm = 3.27

cloth_net_mean = [105.75554139, 107.88777922, 98.78171416]
cloth_net_std = [70.90814346, 71.32871214, 69.4612448]

# basket_net_mean = 0.16303136
# basket_net_std = 0.41344904
# basket_net_mean = 0.311865
# # basket_net_std = 0.5426525
# basket_net_mean = 0.1102060987658177
# basket_net_std = 0.33788160444680088
# basket_net_mean = 0.1012
# basket_net_std = 0.3319
# basket_net_mean = 0.029
# basket_net_std = 0.226


# basket_net_ul = 1.35
# # basket_net_ll = 1
# basket_net_ul = 1.4
# # basket_net_ll = 1.05
# basket_net_ul = 1.25
# basket_net_ll = 1.05
# basket_net_ul = 1.3
# basket_net_ll = 1.1
# basket_net_ul = 1.2
# basket_net_ll = 1.05
# basket_net_ul = 1.85
# basket_net_ll = 1.75


basket_net_ul= 1.9
basket_net_ll = 1.75

# basket_net_mean = 0.04
# basket_net_std = 0.265

basket_net_mean = 0.0375
basket_net_std = 0.258

basket_net_lower_mean = 0.114
basket_net_lower_std = 0.44

head_dist = 1.27

# Used to match depth images to simulated images
basket_net_bounds = []

basket_im_dims = [144, 256]

# basket_near_pos = np.array([0.65, 0.35,  0.875])
# basket_near_pos = np.array([-0.75, 0.15,  0.865])
# basket_far_pos = np.array([0.6, 0,  0.865])
# basket_near_rot = np.array([12*np.pi/8, 0, np.pi/2])
# # basket_near_rot = np.array([np.pi/2, 0, np.pi/2])
# basket_far_rot = np.array([np.pi/2, 0, np.pi/2])
# basket_near_rot = [-np.pi/4, 0, np.pi/2]
# basket_far_rot = [np.pi/4, 0, np.pi/2]

basket_net_zero_pos = [0.01, 0.02, np.pi/2]

basket_near_pos = np.array([-0.68, 0.25,  0.85])
basket_far_pos = np.array([0.75, 0,  0.85])
basket_near_rot = np.array([3*np.pi/2, 0, np.pi/2])
basket_far_rot = np.array([np.pi/2, 0, np.pi/2])

# cloth_grid_spacing = 0.15 # From center to center is 0.2 + 0.15 + 0.2

left_joints = ['left_s0', 'left_s1', 'left_e0', 'left_e1', 'left_w0', 'left_w1', 'left_w2']
right_joints = ['right_s0', 'right_s1', 'right_e0', 'right_e1', 'right_w0', 'right_w1', 'right_w2']

MAX_CLOTHS = 5

# regions = [[40*np.pi/180], [-np.pi/2], [-np.pi], [-88*np.pi/180]]
regions = [[8*np.pi/9], [np.pi/2], [0.0], [-np.pi/4]]

camera_rot = 0.111

# From table frame to image frame
cloth_grid_rot_mat = np.array([[np.cos(camera_rot), -np.sin(camera_rot)], [np.sin(camera_rot), np.cos(camera_rot)]])

ATTEMPT_LIMIT = int(MAX_CLOTHS * 1.5)
